<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Login Vendedores</title>
  <style>
    body { font-family: Arial, sans-serif; display: flex; justify-content: center; align-items: center; height: 100vh; background: #f0f0f0; }
    form { background: #fff; padding: 20px; border-radius: 8px; box-shadow: 0 2px 6px rgba(0,0,0,0.2); }
    input { display: block; margin-bottom: 10px; width: 100%; padding: 8px; }
    button { padding: 10px 20px; width: 100%; background: #007BFF; color: #fff; border: none; border-radius: 4px; cursor: pointer; }
    button:hover { background: #0056b3; }
  </style>
</head>
<body>

<form id="loginForm">
  <h2>Login Vendedores</h2>
  <input id="usuario" type="text" placeholder="Usuario" required />
  <input id="clave" type="password" placeholder="Clave" required />
  <button type="submit">Entrar</button>
</form>

<script>
  const form = document.getElementById("loginForm");

  form.addEventListener("submit", async (e) => {
    e.preventDefault();
    const usuario = document.getElementById("usuario").value;
    const clave = document.getElementById("clave").value;

    try {
      const res = await fetch("/.netlify/functions/login", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ usuario, clave })
      });

      if (!res.ok) throw new Error("Error en la petición");

      const data = await res.json();
      console.log(data);

      if (data.success) {
        alert("Login exitoso");
        // Aquí podés redirigir o mostrar los datos
        // window.location.href = "/dashboard.html";
      } else {
        alert("Usuario o clave incorrectos");
      }
    } catch (err) {
      alert("Error al conectar con el servidor: " + err.message);
    }
  });
</script>

</body>
</html>
